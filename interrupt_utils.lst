   1              		.file	"interrupt_utils.c"
   9              	.Ltext0:
  10              		.align	2
  11              		.global	restoreIRQ
  13              	restoreIRQ:
  14              	.LFB5:
  15              		.file 1 "interrupt_utils.c"
   1:interrupt_utils.c **** /******************************************************************************
   2:interrupt_utils.c ****  *
   3:interrupt_utils.c ****  * $RCSfile: $
   4:interrupt_utils.c ****  * $Revision: $
   5:interrupt_utils.c ****  *
   6:interrupt_utils.c ****  * This module provides the interface routines for setting up and
   7:interrupt_utils.c ****  * controlling the various interrupt modes present on the ARM processor.
   8:interrupt_utils.c ****  * Copyright 2004, R O SoftWare
   9:interrupt_utils.c ****  * No guarantees, warrantees, or promises, implied or otherwise.
  10:interrupt_utils.c ****  * May be used for hobby or commercial purposes provided copyright
  11:interrupt_utils.c ****  * notice remains intact.
  12:interrupt_utils.c ****  *
  13:interrupt_utils.c ****  *****************************************************************************/
  14:interrupt_utils.c **** #include "interrupt_utils.h"
  15:interrupt_utils.c **** 
  16:interrupt_utils.c **** #define IRQ_MASK 0x00000080
  17:interrupt_utils.c **** #define FIQ_MASK 0x00000040
  18:interrupt_utils.c **** #define INT_MASK (IRQ_MASK | FIQ_MASK)
  19:interrupt_utils.c **** 
  20:interrupt_utils.c **** static inline unsigned __get_cpsr(void)
  21:interrupt_utils.c **** {
  22:interrupt_utils.c ****   unsigned long retval;
  23:interrupt_utils.c ****   asm volatile (" mrs  %0, cpsr" : "=r" (retval) : /* no inputs */  );
  24:interrupt_utils.c ****   return retval;
  25:interrupt_utils.c **** }
  26:interrupt_utils.c **** 
  27:interrupt_utils.c **** static inline void __set_cpsr(unsigned val)
  28:interrupt_utils.c **** {
  29:interrupt_utils.c ****   asm volatile (" msr  cpsr, %0" : /* no outputs */ : "r" (val)  );
  30:interrupt_utils.c **** }
  31:interrupt_utils.c **** 
  32:interrupt_utils.c **** unsigned disableIRQ(void)
  33:interrupt_utils.c **** {
  34:interrupt_utils.c ****   unsigned _cpsr;
  35:interrupt_utils.c **** 
  36:interrupt_utils.c ****   _cpsr = __get_cpsr();
  37:interrupt_utils.c ****   __set_cpsr(_cpsr | IRQ_MASK);
  38:interrupt_utils.c ****   return _cpsr;
  39:interrupt_utils.c **** }
  40:interrupt_utils.c **** 
  41:interrupt_utils.c **** unsigned restoreIRQ(unsigned oldCPSR)
  42:interrupt_utils.c **** {
  16              		.loc 1 42 0
  17              		@ Function supports interworking.
  18              		@ args = 0, pretend = 0, frame = 0
  19              		@ frame_needed = 0, uses_anonymous_args = 0
  20              		@ link register save eliminated.
  21              	.LVL0:
  22              		@ lr needed for prologue
  23              	.LBB6:
  24              	.LBB7:
  25              		.loc 1 23 0
  26 0000 00200FE1 		 mrs  r2, cpsr
  27              	.LVL1:
  28              	.LBE7:
  29              	.LBE6:
  30              	.LBB8:
  31              	.LBB9:
  32              		.loc 1 29 0
  33 0004 800000E2 		and	r0, r0, #128
  34              	.LVL2:
  35 0008 8030C2E3 		bic	r3, r2, #128
  36 000c 003083E1 		orr	r3, r3, r0
  37 0010 03F029E1 		 msr  cpsr, r3
  38              	.LBE9:
  39              	.LBE8:
  43:interrupt_utils.c ****   unsigned _cpsr;
  44:interrupt_utils.c **** 
  45:interrupt_utils.c ****   _cpsr = __get_cpsr();
  46:interrupt_utils.c ****   __set_cpsr((_cpsr & ~IRQ_MASK) | (oldCPSR & IRQ_MASK));
  47:interrupt_utils.c ****   return _cpsr;
  48:interrupt_utils.c **** }
  40              		.loc 1 48 0
  41 0014 0200A0E1 		mov	r0, r2
  42 0018 1EFF2FE1 		bx	lr
  43              	.LFE5:
  45              		.align	2
  46              		.global	restoreFIQ
  48              	restoreFIQ:
  49              	.LFB8:
  49:interrupt_utils.c **** 
  50:interrupt_utils.c **** unsigned enableIRQ(void)
  51:interrupt_utils.c **** {
  52:interrupt_utils.c ****   unsigned _cpsr;
  53:interrupt_utils.c **** 
  54:interrupt_utils.c ****   _cpsr = __get_cpsr();
  55:interrupt_utils.c ****   __set_cpsr(_cpsr & ~IRQ_MASK);
  56:interrupt_utils.c ****   return _cpsr;
  57:interrupt_utils.c **** }
  58:interrupt_utils.c **** 
  59:interrupt_utils.c **** unsigned disableFIQ(void)
  60:interrupt_utils.c **** {
  61:interrupt_utils.c ****   unsigned _cpsr;
  62:interrupt_utils.c **** 
  63:interrupt_utils.c ****   _cpsr = __get_cpsr();
  64:interrupt_utils.c ****   __set_cpsr(_cpsr | FIQ_MASK);
  65:interrupt_utils.c ****   return _cpsr;
  66:interrupt_utils.c **** }
  67:interrupt_utils.c **** 
  68:interrupt_utils.c **** unsigned restoreFIQ(unsigned oldCPSR)
  69:interrupt_utils.c **** {
  50              		.loc 1 69 0
  51              		@ Function supports interworking.
  52              		@ args = 0, pretend = 0, frame = 0
  53              		@ frame_needed = 0, uses_anonymous_args = 0
  54              		@ link register save eliminated.
  55              	.LVL3:
  56              		@ lr needed for prologue
  57              	.LBB14:
  58              	.LBB15:
  59              		.loc 1 23 0
  60 001c 00200FE1 		 mrs  r2, cpsr
  61              	.LVL4:
  62              	.LBE15:
  63              	.LBE14:
  64              	.LBB16:
  65              	.LBB17:
  66              		.loc 1 29 0
  67 0020 400000E2 		and	r0, r0, #64
  68              	.LVL5:
  69 0024 4030C2E3 		bic	r3, r2, #64
  70 0028 003083E1 		orr	r3, r3, r0
  71 002c 03F029E1 		 msr  cpsr, r3
  72              	.LBE17:
  73              	.LBE16:
  70:interrupt_utils.c ****   unsigned _cpsr;
  71:interrupt_utils.c **** 
  72:interrupt_utils.c ****   _cpsr = __get_cpsr();
  73:interrupt_utils.c ****   __set_cpsr((_cpsr & ~FIQ_MASK) | (oldCPSR & FIQ_MASK));
  74:interrupt_utils.c ****   return _cpsr;
  75:interrupt_utils.c **** }
  74              		.loc 1 75 0
  75 0030 0200A0E1 		mov	r0, r2
  76 0034 1EFF2FE1 		bx	lr
  77              	.LFE8:
  79              		.align	2
  80              		.global	disableFIQ
  82              	disableFIQ:
  83              	.LFB7:
  84              		.loc 1 60 0
  85              		@ Function supports interworking.
  86              		@ args = 0, pretend = 0, frame = 0
  87              		@ frame_needed = 0, uses_anonymous_args = 0
  88              		@ link register save eliminated.
  89              		@ lr needed for prologue
  90              	.LBB22:
  91              	.LBB23:
  92              		.loc 1 23 0
  93 0038 00000FE1 		 mrs  r0, cpsr
  94              	.LVL6:
  95              	.LBE23:
  96              	.LBE22:
  97              	.LBB24:
  98              	.LBB25:
  99              		.loc 1 29 0
 100 003c 403080E3 		orr	r3, r0, #64
 101 0040 03F029E1 		 msr  cpsr, r3
 102              	.LVL7:
 103              	.LBE25:
 104              	.LBE24:
 105              		.loc 1 66 0
 106 0044 1EFF2FE1 		bx	lr
 107              	.LFE7:
 109              		.align	2
 110              		.global	enableFIQ
 112              	enableFIQ:
 113              	.LFB9:
  76:interrupt_utils.c **** 
  77:interrupt_utils.c **** unsigned enableFIQ(void)
  78:interrupt_utils.c **** {
 114              		.loc 1 78 0
 115              		@ Function supports interworking.
 116              		@ args = 0, pretend = 0, frame = 0
 117              		@ frame_needed = 0, uses_anonymous_args = 0
 118              		@ link register save eliminated.
 119              		@ lr needed for prologue
 120              	.LBB30:
 121              	.LBB31:
 122              		.loc 1 23 0
 123 0048 00000FE1 		 mrs  r0, cpsr
 124              	.LVL8:
 125              	.LBE31:
 126              	.LBE30:
 127              	.LBB32:
 128              	.LBB33:
 129              		.loc 1 29 0
 130 004c 4030C0E3 		bic	r3, r0, #64
 131 0050 03F029E1 		 msr  cpsr, r3
 132              	.LVL9:
 133              	.LBE33:
 134              	.LBE32:
  79:interrupt_utils.c ****   unsigned _cpsr;
  80:interrupt_utils.c **** 
  81:interrupt_utils.c ****   _cpsr = __get_cpsr();
  82:interrupt_utils.c ****   __set_cpsr(_cpsr & ~FIQ_MASK);
  83:interrupt_utils.c ****   return _cpsr;
  84:interrupt_utils.c **** }
 135              		.loc 1 84 0
 136 0054 1EFF2FE1 		bx	lr
 137              	.LFE9:
 139              		.align	2
 140              		.global	disableIRQ
 142              	disableIRQ:
 143              	.LFB4:
 144              		.loc 1 33 0
 145              		@ Function supports interworking.
 146              		@ args = 0, pretend = 0, frame = 0
 147              		@ frame_needed = 0, uses_anonymous_args = 0
 148              		@ link register save eliminated.
 149              		@ lr needed for prologue
 150              	.LBB38:
 151              	.LBB39:
 152              		.loc 1 23 0
 153 0058 00000FE1 		 mrs  r0, cpsr
 154              	.LVL10:
 155              	.LBE39:
 156              	.LBE38:
 157              	.LBB40:
 158              	.LBB41:
 159              		.loc 1 29 0
 160 005c 803080E3 		orr	r3, r0, #128
 161 0060 03F029E1 		 msr  cpsr, r3
 162              	.LVL11:
 163              	.LBE41:
 164              	.LBE40:
 165              		.loc 1 39 0
 166 0064 1EFF2FE1 		bx	lr
 167              	.LFE4:
 169              		.align	2
 170              		.global	enableIRQ
 172              	enableIRQ:
 173              	.LFB6:
 174              		.loc 1 51 0
 175              		@ Function supports interworking.
 176              		@ args = 0, pretend = 0, frame = 0
 177              		@ frame_needed = 0, uses_anonymous_args = 0
 178              		@ link register save eliminated.
 179              		@ lr needed for prologue
 180              	.LBB46:
 181              	.LBB47:
 182              		.loc 1 23 0
 183 0068 00000FE1 		 mrs  r0, cpsr
 184              	.LVL12:
 185              	.LBE47:
 186              	.LBE46:
 187              	.LBB48:
 188              	.LBB49:
 189              		.loc 1 29 0
 190 006c 8030C0E3 		bic	r3, r0, #128
 191 0070 03F029E1 		 msr  cpsr, r3
 192              	.LVL13:
 193              	.LBE49:
 194              	.LBE48:
 195              		.loc 1 57 0
 196 0074 1EFF2FE1 		bx	lr
 197              	.LFE6:
 263              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 interrupt_utils.c
/var/tmp//ccHYOtDZ.s:13     .text:00000000 restoreIRQ
/var/tmp//ccHYOtDZ.s:26     .text:00000000 $a
/var/tmp//ccHYOtDZ.s:48     .text:0000001c restoreFIQ
/var/tmp//ccHYOtDZ.s:82     .text:00000038 disableFIQ
/var/tmp//ccHYOtDZ.s:112    .text:00000048 enableFIQ
/var/tmp//ccHYOtDZ.s:142    .text:00000058 disableIRQ
/var/tmp//ccHYOtDZ.s:172    .text:00000068 enableIRQ

NO UNDEFINED SYMBOLS
